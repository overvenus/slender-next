{{ if and .Site.Params.mathjax .Params.mathjax }}
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        {{ with .Site.Params }}
            {{ with .mathHideMenu }}
                {{ if . }}
        showMathMenu: false,
        showMathMenuMSIE: false,
                {{ end }}
            {{ end }}
        menuSettings: {
            {{ with .mathZoom }}
          zoom: "{{ . }}",
            {{ end }}
            {{ with .mathRenderer }}
          renderer: "{{ . }}"
            {{ end }}
        },
        {{ end }}
        tex2jax: {
          inlineMath: [['$','$'], ['\\(','\\)']],
          displayMath: [['$$','$$'], ['\\[','\\]']],
          processEscapes: true,
          processEnvironments: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
          TeX: { equationNumbers: { autoNumber: "AMS" },
               extensions: ["AMSmath.js", "AMSsymbols.js"] }
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        // Fix <code> tags after MathJax finishes running. This is a
        // hack to overcome a shortcoming of Markdown. Discussion at
        // https://github.com/mojombo/jekyll/issues/199
        var all = MathJax.Hub.getAllJax(), i;
        for(i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>

    {{ if eq .Site.LanguageCode "zh-Hans" }}
        <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
        <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
    {{ else }}
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    {{ end }}
{{ end }}
